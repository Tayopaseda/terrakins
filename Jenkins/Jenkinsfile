pipeline {
  agent any
  stages {
    stage('Install dependencies') {
      steps {
        sh "chmod +x ~/terrakins/install_scripts/install_scripts.sh"
        sh "~/terrakins/install_scripts/install_scripts.sh"
      }
    }
    
    stage('Run terraform config files') {
      steps {
        sh "cd ~/terrakins"
        sh "terraform init"
        sh "terraform plan"
        sh "terraform apply -auto-approve"
      }
    }   
  }
}
